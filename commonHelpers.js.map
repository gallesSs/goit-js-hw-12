{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\nexport function createMarkup(arr) {\n    return arr\n      .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <div class=\"gallery\">\n         <a class=\"gallery-link\" href=\"${largeImageURL}\">\n         <img class=\"gallery-image\"\n           src=\"${webformatURL}\"\n           alt=\"${tags}\"\n          />\n         </a>\n         \n        <ul class=\"card-description\">\n          <li class=\"description\">Likes <span class=\"accent\">${likes} </span></li>\n          <li class=\"description\">Views <span class=\"accent\">${views} </span></li>\n          <li class=\"description\">Comments <span class=\"accent\">${comments} </span></li>\n          <li class=\"description\">Downloads <span class=\"accent\">${downloads} </span></li>\n        </ul>\n        </div>\n      </li>\n      `).join(\"\");\n  }","\nimport axios from 'axios';\n\nasync function getInform(str, page) {\n    const API_KEY = '43506380-9b283c5280133fe541ac86218';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: str,\n        image_typ: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15,\n    });\n\n    const { data } = await axios.get(`${BASE_URL}?${params}`);\n    return data;\n\n}\nexport { getInform };","\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createMarkup } from \"./js/render-functions.js\";\nimport { getInform } from \"./js/pixabay-api.js\";\n\nconst form = document.querySelector(\".form-inline\");\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".btn-load\");\n\nform.addEventListener(\"submit\", searchImages);\nloadMoreBtn.addEventListener(\"click\", imagesMore);\n\nfunction loaderShow() {\n    loader.classList.toggle(\"visible\");\n}\n\nfunction btnShow() {\n    loadMoreBtn.classList.toggle(\"visible-btn\");\n}\n\nconst lightbox = new SimpleLightbox('.images a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n// const options = {\n//     threshold: 0.5,\n// };\n// const callback = function (entries, observer) {\n\n//     entries.forEach((entry) => {\n//         if (entry.isIntersecting) {\n//             observer.unobserve(entry.target)\n//             imagesMore();\n//         }\n//     });\n// };\n\n// const observer = new IntersectionObserver(callback, options);// реалізація скролу\n\n\nlet page = 1;\nlet totalPages = 0;\nlet searchInput = \"\";\n\nasync function searchImages(evt) {\n    evt.preventDefault();\n    list.innerHTML = '';\n    page = 1;\n\n    const { query } = evt.currentTarget.elements;\n    searchInput = query.value.trim();\n\n    if (searchInput === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'The field cannot be empty!!!',\n            position: 'topRight',\n        });\n        return;\n    };\n\n    loaderShow();\n\n    try {\n        const data = await getInform(searchInput, page);\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n        lightbox.refresh();\n        totalPages = Math.ceil(data.totalHits / 15);\n        if (page < totalPages) {\n            btnShow();\n            // observer.observe(list.lastElementChild) // реалізація скролу\n        }\n        form.reset();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        loaderShow();\n    }\n}\n\n\nasync function imagesMore() {\n    page += 1;\n    loaderShow();\n\n    try {\n        const data = await getInform(searchInput, page);\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n        // const { height } = list.firstElementChild.getBoundingClientRect();// реалізація скролу\n        // window.scrollBy({\n        //     top: height * 2,\n        //     behavior: \"smooth\",\n        // });\n        lightbox.refresh();\n        // observer.observe(list.lastElementChild);.// реалізація скролу\n\n        if (page === totalPages) {\n            btnShow();\n            // observer.unobserve(list.lastElementChild);// реалізація скролу\n            return iziToast.info({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        loaderShow();\n    }\n};"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getInform","str","page","API_KEY","BASE_URL","params","data","axios","form","list","loader","loadMoreBtn","searchImages","imagesMore","loaderShow","btnShow","lightbox","SimpleLightbox","totalPages","searchInput","evt","query","iziToast"],"mappings":"+vBAEO,SAASA,EAAaC,EAAK,CAC9B,OAAOA,EACJ,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA;AAAA,yCAGhDL,CAAa;AAAA;AAAA,kBAEpCD,CAAY;AAAA,kBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+DAKyCC,CAAK;AAAA,+DACLC,CAAK;AAAA,kEACFC,CAAQ;AAAA,mEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,OAIrE,EAAE,KAAK,EAAE,CAChB,CCpBA,eAAeC,EAAUC,EAAKC,EAAM,CAChC,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGF,EACH,UAAW,QACX,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EAClB,CAAK,EAEK,CAAE,KAAAI,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGH,CAAQ,IAAIC,CAAM,EAAE,EACxD,OAAOC,CAEX,CCTA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,WAAW,EAEtDH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,SAASC,GAAa,CAClBJ,EAAO,UAAU,OAAO,SAAS,CACrC,CAEA,SAASK,GAAU,CACfJ,EAAY,UAAU,OAAO,aAAa,CAC9C,CAEA,MAAMK,EAAW,IAAIC,EAAe,YAAa,CAC7C,aAAc,MACd,aAAc,GAClB,CAAC,EAkBD,IAAIf,EAAO,EACPgB,EAAa,EACbC,EAAc,GAElB,eAAeP,EAAaQ,EAAK,CAC7BA,EAAI,eAAc,EAClBX,EAAK,UAAY,GACjBP,EAAO,EAEP,KAAM,CAAE,MAAAmB,CAAO,EAAGD,EAAI,cAAc,SAGpC,GAFAD,EAAcE,EAAM,MAAM,OAEtBF,IAAgB,GAAI,CACpBG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MAER,CACIR,IAEA,GAAI,CACA,MAAMR,EAAO,MAAMN,EAAUmB,EAAajB,CAAI,EAC9C,GAAII,EAAK,KAAK,SAAW,EAAG,CACxBgB,EAAS,QAAQ,CACb,MAAO,GACP,QAAS,2EACT,SAAU,UAC1B,CAAa,EACD,MACH,CACDb,EAAK,mBAAmB,YAAalB,EAAae,EAAK,IAAI,CAAC,EAC5DU,EAAS,QAAO,EAChBE,EAAa,KAAK,KAAKZ,EAAK,UAAY,EAAE,EACtCJ,EAAOgB,GACPH,IAGJP,EAAK,MAAK,CACb,MAAe,CACZc,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNR,GACH,CACL,CAGA,eAAeD,GAAa,CACxBX,GAAQ,EACRY,IAEA,GAAI,CACA,MAAMR,EAAO,MAAMN,EAAUmB,EAAajB,CAAI,EAU9C,GATAO,EAAK,mBAAmB,YAAalB,EAAae,EAAK,IAAI,CAAC,EAM5DU,EAAS,QAAO,EAGZd,IAASgB,EACT,OAAAH,IAEOO,EAAS,KAAK,CACjB,SAAU,WACV,QAAS,4DACzB,CAAa,CAER,MAAe,CACZA,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNR,GACH,CACL"}